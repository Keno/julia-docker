worker base docker images
=========================

To build Julia worker base docker images, first install [harbor](https://github.com/leethomas/harbor) with `gem install harbordock`, then run `make` in this directory.  The result will be docker images named things like `julia_workerbase_centos5_11:x64` and `julia_workerbase_ubuntu16_04:x86`.  These images are what are deployed onto in order to create buildworkers, as these images contain things like very recent versions of `gcc`, `python`, `cmake`, etc...

To generate all the `Dockerfile`s without actually building the docker images, run `make`, or `make dockerfiles`, if you like to be verbose.  This is the default behavior.

To generate a `Dockerfile` and then build the result, run something like `make centos5_11-x86`, or `make ubuntu16_04-x64`.

To generate all `Dockerfile`s and then build all results, run `make buildall`.

To push the resulting docker images to the Docker Hub, run `make pushall`, or `make push-centos5_11-x86` to push only a single image.  You must have logged into an authorized Docker Hub account on your local docker daemon for this to work, of course.

**NOTE:** This repository uses the new experimental `--squash` command introduced in Docker 1.13 in order to cut down on image sizes (Without `--squash` support, the `centos5_11-x86` image is ~6.5 GB, with it it is ~1.3 GB). While the actual `Dockerfile`s generated by this repository do not have anything experimental within them, the `Makefile` within this repository will attempt to pass `--squash` to `docker build`.
